.TH QJP 1 "December 2024" "qjp" "User Commands"
.SH NAME
qjp \- quick json picker, an interactive JSON object and text line selector
.SH SYNOPSIS
.B qjp
.RI [ filename ]
.RB [ \-d
.IR display-attribute ]
.RB [ \-o
.IR output-attribute ]
.RB [ \-s
.IR separator ]
.RB [ \-t ]
.RB [ \-T ]
.RB [ \-l ]
.br
.B qjp
.RB [ \-d
.IR display-attribute ]
.RB [ \-o
.IR output-attribute ]
.RB [ \-s
.IR separator ]
.RB [ \-t ]
.RB [ \-T ]
.RB [ \-l ]
.B <
.I input
.br
.B qjp
.RB [ \-h | \-\-help ]
.SH DESCRIPTION
.B qjp
(quick json picker) is an interactive command-line tool for filtering and selecting JSON objects or plain text lines, similar to
.BR percol " and " fzf .
It reads an array of JSON objects (or plain text lines with
.BR \-l )
from a file or standard input, displays specified attribute(s) for each object in an interactive list, and outputs the selected object(s) (or specific attributes) to standard output.
.PP
The tool provides real-time filtering as you type, allowing you to quickly narrow down large JSON datasets or line-based content. Navigation is performed using arrow keys, multi-selection with Ctrl+Space, and final selection with the Enter key. Selected items are highlighted with a green background.
.SH OPTIONS
.TP
.I filename
Optional positional argument specifying the JSON file to read (or plain text file with
.BR \-l ).
If not provided, reads from standard input. Cannot be used together with stdin input.
.TP
.BR \-d ", " " " \fIdisplay-attribute\fR
The JSON attribute to display for each object in the interactive list. Can be specified multiple times to display multiple attributes separated by the separator string. If not specified, the entire object is displayed as JSON. Cannot be used with
.BR \-l .
.TP
.BR \-o ", " " " \fIoutput-attribute\fR
The JSON attribute to output when object(s) are selected. If not specified, the entire selected object(s) are output as single-line JSON strings. Arrays and objects within the output are also formatted as single-line JSON. Cannot be used with
.BR \-l .
.TP
.BR \-s ", " " " \fIseparator\fR
Separator string to use when displaying multiple attributes (specified with multiple
.B \-d
flags). Default is " \- " (space, dash, space). Cannot be used with
.BR \-l .
.TP
.BR \-t
Truncate long lines instead of wrapping them. Useful for very long content to keep each item on a single line. Cannot be used with
.BR \-l .
.TP
.BR \-T
Table mode: align multiple display attributes in columns with consistent spacing. Each attribute is padded to the width of its longest value. Cannot be used with
.BR \-l .
.TP
.BR \-l
Line mode: treat input as plain text lines instead of JSON. Each line becomes a selectable item, and selected lines are output verbatim. Behaves like
.BR percol .
Cannot be used with
.BR \-d ", " \-o ", " \-s ", " \-t ", or " \-T .
.TP
.BR \-h ", " \-\-help
Display usage information and exit.
.SH KEYBOARD CONTROLS
.TP
.B Typing
Filter the list in real-time. Any printable characters will be added to the filter string.
.TP
.BR "Up Arrow" ", " "Down Arrow"
Navigate through the filtered list.
.TP
.B Ctrl+Space
Toggle selection of the current item (multi-select mode). Selected items are highlighted with a green background. After toggling, the cursor moves to the next item.
.TP
.B Enter
Confirm selection and output the result. If items were selected with Ctrl+Space, all selected items are output (one per line). Otherwise, the current cursor item is output.
.TP
.B Backspace
Delete the last character from the filter string.
.TP
.BR "Esc" ", " "Ctrl+C"
Exit without selecting any item.
.SH EXAMPLES
Read from file and display entire objects:
.PP
.nf
.RS
qjp data.json
.RE
.fi
.PP
Read from file and display specific attribute:
.PP
.nf
.RS
qjp data.json \-d name
.RE
.fi
.PP
Display attribute and output only the ID field:
.PP
.nf
.RS
qjp data.json \-d name \-o id
.RE
.fi
.PP
Display multiple attributes with default separator:
.PP
.nf
.RS
qjp data.json \-d name \-d category
.RE
.fi
.PP
Display multiple attributes with custom separator:
.PP
.nf
.RS
qjp data.json \-d name \-d category \-s " | "
.RE
.fi
.PP
Display multiple attributes in table mode (aligned columns):
.PP
.nf
.RS
qjp data.json \-d name \-d category \-d value \-T
.RE
.fi
.PP
Use truncation for long lines:
.PP
.nf
.RS
qjp data.json \-t
.RE
.fi
.PP
Read from stdin (traditional pipe usage):
.PP
.nf
.RS
cat data.json | qjp \-d name
.RE
.fi
.PP
Line mode: select from plain text lines (like percol):
.PP
.nf
.RS
ls \-la | qjp \-l
.RE
.fi
.PP
Line mode with file input:
.PP
.nf
.RS
qjp file.txt \-l
.RE
.fi
.PP
Line mode with command output:
.PP
.nf
.RS
ps aux | qjp \-l
.RE
.fi
.PP
Chain with jq for further processing:
.PP
.nf
.RS
qjp data.json \-d name | jq '.value'
.RE
.fi
.PP
Multi-select example (use Ctrl+Space to select items, then Enter):
.PP
.nf
.RS
qjp data.json \-d name \-o id
# Use Ctrl+Space to select multiple items, press Enter to output all IDs
.RE
.fi
.SH INPUT FORMAT
.B qjp
expects a JSON array of objects on standard input. Each object in the array should have the display attribute specified as an argument.
.PP
.fi
.SH OUTPUT FORMAT
The output format depends on whether the
.B \-o
option is used, whether multiple items are selected, and whether
.B \-l
(line mode) is used:
.TP
.B Without \-o (JSON mode)
The entire selected JSON object(s) are output, one per line. Each object is formatted as a single-line JSON string.
.TP
.B With \-o (JSON mode)
Only the value of the specified attribute is output for each selected object, one per line. Numeric values are output as integers when appropriate (e.g., 42 instead of 42.0). Array and object values are output as single-line JSON strings.
.TP
.B Line mode (\-l)
Selected lines are output verbatim, one per line, exactly as they appeared in the input.
.TP
.B Multi-select
When multiple items are selected using Ctrl+Space, all selected items are output in order (sorted by their original index), one per line.
.SH EXIT STATUS
.TP
.B 0
An item was successfully selected.
.TP
.B 1
An error occurred (invalid input, missing attribute, etc.) or no item was selected (user pressed Esc or Ctrl+C).
.SH ENVIRONMENT
.B qjp
requires access to
.I /dev/tty
for interactive input/output when reading JSON from standard input via pipes.
.SH SEE ALSO
.BR jq (1),
.BR percol (1),
.BR fzf (1)
.SH AUTHOR
Pedro http://github.com/plainas
.SH NOTES
When displaying multiple attributes with
.BR \-d ,
only objects that have
.I all
specified attributes will show all values. If an object is missing one of the attributes, that value will be omitted from the display string.
.PP
Line wrapping calculations account for terminal width. Long content will wrap naturally unless
.B \-t
is used to truncate lines.
.SH COPYRIGHT
Copyright (c) Pedro 2025
.PP
Licensed under the MIT License.
