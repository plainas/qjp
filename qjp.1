.TH QJP 1 "December 2024" "qjp" "User Commands"
.SH NAME
qjp \- quick json picker, an interactive JSON object selector
.SH SYNOPSIS
.B qjp
.RI [ filename ]
.RB [ \-d
.IR display-attribute ]
.RB [ \-o
.IR output-attribute ]
.RB [ \-s
.IR separator ]
.RB [ \-t ]
.br
.B qjp
.RB [ \-d
.IR display-attribute ]
.RB [ \-o
.IR output-attribute ]
.RB [ \-s
.IR separator ]
.RB [ \-t ]
.B <
.I input.json
.br
.B qjp
.RB [ \-h | \-\-help ]
.SH DESCRIPTION
.B qjp
(quick json picker) is an interactive command-line tool for filtering and selecting JSON objects, similar to
.BR percol " and " fzf .
It reads an array of JSON objects from a file or standard input, displays specified attribute(s) for each object in an interactive list, and outputs the selected object(s) (or specific attributes) to standard output.
.PP
The tool provides real-time filtering as you type, allowing you to quickly narrow down large JSON datasets. Navigation is performed using arrow keys, multi-selection with Ctrl+Space, and final selection with the Enter key. Selected items are highlighted with a green background.
.SH OPTIONS
.TP
.I filename
Optional positional argument specifying the JSON file to read. If not provided, reads from standard input. Cannot be used together with stdin input.
.TP
.BR \-d ", " " " \fIdisplay-attribute\fR
The JSON attribute to display for each object in the interactive list. Can be specified multiple times to display multiple attributes separated by the separator string. If not specified, the entire object is displayed as JSON.
.TP
.BR \-o ", " " " \fIoutput-attribute\fR
The JSON attribute to output when object(s) are selected. If not specified, the entire selected object(s) are output as single-line JSON strings.
.TP
.BR \-s ", " " " \fIseparator\fR
Separator string to use when displaying multiple attributes (specified with multiple
.B \-d
flags). Default is " \- " (space, dash, space).
.TP
.BR \-t
Truncate long lines instead of wrapping them. Useful for very long content to keep each item on a single line.
.TP
.BR \-h ", " \-\-help
Display usage information and exit.
.SH KEYBOARD CONTROLS
.TP
.B Typing
Filter the list in real-time. Any printable characters will be added to the filter string.
.TP
.BR "Up Arrow" ", " "Down Arrow"
Navigate through the filtered list.
.TP
.B Ctrl+Space
Toggle selection of the current item (multi-select mode). Selected items are highlighted with a green background. After toggling, the cursor moves to the next item.
.TP
.B Enter
Confirm selection and output the result. If items were selected with Ctrl+Space, all selected items are output (one per line). Otherwise, the current cursor item is output.
.TP
.B Backspace
Delete the last character from the filter string.
.TP
.BR "Esc" ", " "Ctrl+C"
Exit without selecting any item.
.SH EXAMPLES
Read from file and display entire objects:
.PP
.nf
.RS
qjp cars.json
.RE
.fi
.PP
Read from file and display car models:
.PP
.nf
.RS
qjp cars.json \-d model
.RE
.fi
.PP
Display car models and output only the ID field:
.PP
.nf
.RS
qjp cars.json \-d model \-o id
.RE
.fi
.PP
Display multiple attributes (model and year) with default separator:
.PP
.nf
.RS
qjp cars.json \-d model \-d year
.RE
.fi
.PP
Display multiple attributes with custom separator:
.PP
.nf
.RS
qjp cars.json \-d model \-d year \-s " | "
.RE
.fi
.PP
Use truncation for long lines:
.PP
.nf
.RS
qjp cars.json \-t
.RE
.fi
.PP
Read from stdin (traditional pipe usage):
.PP
.nf
.RS
cat cars.json | qjp \-d model
.RE
.fi
.PP
Chain with jq for further processing:
.PP
.nf
.RS
qjp cars.json \-d model | jq '.price'
.RE
.fi
.PP
Multi-select example (use Ctrl+Space to select items, then Enter):
.PP
.nf
.RS
qjp cars.json \-d model \-o id
# Use Ctrl+Space to select multiple cars, press Enter to output all IDs
.RE
.fi
.SH INPUT FORMAT
.B qjp
expects a JSON array of objects on standard input. Each object in the array should have the display attribute specified as an argument.
.PP
Example input format:
.PP
.nf
.RS
[
  {
    "id": 1,
    "make": "Toyota",
    "model": "Camry",
    "year": 2022
  },
  {
    "id": 2,
    "make": "Tesla",
    "model": "Model 3",
    "year": 2023
  }
]
.RE
.fi
.SH OUTPUT FORMAT
The output format depends on whether the
.B \-o
option is used and whether multiple items are selected:
.TP
.B Without \-o
The entire selected JSON object(s) are output, one per line. Each object is formatted as a single-line JSON string.
.TP
.B With \-o
Only the value of the specified attribute is output for each selected object, one per line. Numeric values are output as integers when appropriate (e.g., 42 instead of 42.0).
.TP
.B Multi-select
When multiple items are selected using Ctrl+Space, all selected items are output in order (sorted by their original index), one per line.
.SH EXIT STATUS
.TP
.B 0
An item was successfully selected.
.TP
.B 1
An error occurred (invalid input, missing attribute, etc.) or no item was selected (user pressed Esc or Ctrl+C).
.SH ENVIRONMENT
.B qjp
requires access to
.I /dev/tty
for interactive input/output when reading JSON from standard input via pipes.
.SH SEE ALSO
.BR jq (1),
.BR percol (1),
.BR fzf (1)
.SH AUTHOR
Pedro http://github.com/plainas
.SH NOTES
When displaying multiple attributes with
.BR \-d ,
only objects that have
.I all
specified attributes will show all values. If an object is missing one of the attributes, that value will be omitted from the display string.
.PP
Line wrapping calculations account for terminal width. Long content will wrap naturally unless
.B \-t
is used to truncate lines.
.SH COPYRIGHT
Copyright (c) Pedro 2025
.PP
Licensed under the MIT License.
